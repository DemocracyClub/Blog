{% extends "base.html" %}

{% block content %}

{% if elections_researched %}
<div class="panel callout radius">
  <h2>Your contributions</h2>
  <p>Thanks so much for helping out!  You've:</p>
  <ul>
    <li>
      Researched
        <strong>{{elections_researched}}</strong> election{{ elections_researched|pluralize }}
    </li>
    <li>
      Found
        <strong>{{areas_researched}}</strong> area{{ elections_researched|pluralize }} that {{ areas_researched|pluralize:"has,have" }} an election
    </li>
  </ul>

</div>
{% endif %}

<h1>{{ object.authority.name }}</h1>

<div class="row">

  <div class="columns large-6">
    <h3>Find a list of wards up for election</h3>

    <p>This authority has <strong>{{ object.percent_to_words }}</strong> of it's seats up for election.</p>

    <p>This could mean that every ward has an election (some wards have more than one councillor), or it could mean that only some wards have a councillor up for election.</p>

    <p>We need your help finding out what wards actually have an election.</p>


    <h3>1. Go to the <a href="{{ object.authority.website }}" target="_blank">council's web site</a></h3>
    <p>Often you're looking for something called 'election notices'.
    <br>These are normally PDFs.</p>
    <p>
      {% if object.authority.election_urls %}
        {% if object.authority.election_urls.1 %}
          We think you'll find this information on one of these pages:
          <ul>
            {% for url in object.authority.election_urls %}
              <li><a href="{{ url }}" target="_blank">{{ url }}</a></li>
            {% endfor %}
          </ul>
        {% else %}
     You might be able to find <a href="{{ object.authority.election_urls.0.URL }}"target="_blank"><strong>more information about the elections here</strong></a>
        {% endif %}
      {% endif %}
    </p>


    <h3>2. Phone the council</h3>
    <p>If the web site doesn't tell you anything useful, you can <a href="tel:{{ object.authority.phone }}"><br><strong>call them on {{ object.authority.phone }}</strong></a> and:</p>
    <ol class="indent">
      <li>Ask to speak to their Democratic or Electoral services team</li>
      <li>Ask that team what wards are up for election on the 5th of May</li>
      <li>Remember that the council will get a lot of calls, so you might be put on hold or not be able to speak with the right person on your first call.</li>
    </ol>

  </div>

  <div class="columns large-6">
    <h3>Select the wards that are up for election:</h3>
    <form method=post id="area_form">
      {% if form.errors.areas %}
        <label class="error">Please select at least one ward</label>
      {% endif %}
      {% csrf_token %}
      {% for area in form.areas %}
        <div>
        {{area}}
        </div>
      {% endfor %}
      <button type=submit class=button>Submit</button>
    </form>
  </div>

</div>


{% endblock content %}
{% block page_javascript %}
<script>
  var checkboxes = $('#area_form input[type=checkbox]');
  $('#area_form').prepend('<a href="#" id="check_all">Check All</a>')
  $('#check_all').on("click", function(e) {
    e.stopPropagation();
    checkboxes.prop('checked', true);
  })
</script>
{% endblock page_javascript %}
